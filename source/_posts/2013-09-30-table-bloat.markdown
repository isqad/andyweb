---
layout: post
title: "Table bloat"
date: 2013-09-30 14:12
comments: true
categories:
---
Таблицы в Postgresql представлены в виде страниц по 8kb, в которых размещаются записи.
Когда одна страница заполняется, к таблице добавляется новая страница. При удалении записей или
их удалении (учитывая, что запись удаляется и затем записывается ее новая копия при любом измении),
место, где были старые записи сразу не может быть использовано. Для этого процесс autovacuum или команда VACUUM
"пробегает" по измененным страницам и помечает такое место как свободное, после этого новые записи могут записываться
 на новое место. Если autovacuum не справляется (из-за плохих настроек, напр.), то к таблице будут
 добавляться новые страницы по мере поступления новых записей. Новые страницы останутся, даже когда
 очистка дойдет до удаленных записей. Таблица становится разреженной в плане плотности записей. Это и есть
 эффект Table bloat.

Источник: [http://habrahabr.ru/post/169939/](http://habrahabr.ru/post/169939/)